<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <meta name="robots" content="index, follow, max-image-preview:large" />
  <title>Islamic Tech Ideas Board | Ummah.build ‚Äì Prayer, Mosque, Zakat, Quran, Ramadan</title>
  <meta name="description" content="Browse 30+ Islamic tech ideas: prayer tools, mosque apps, zakat, Quran, Ramadan, Islamic finance. Open source ideas board for ummah.build. Suggest and contribute via GitHub." />
  <meta name="keywords" content="Islamic tech, ummah build, prayer app, mosque, zakat, Quran, Ramadan, Islamic finance, Muslim developer, halal tech, ideas board" />
  <link rel="canonical" href="https://ideas.ummah.build/" />
  <link rel="dns-prefetch" href="https://ummah.build" />
  <link rel="dns-prefetch" href="https://github.com" />
  <link rel="alternate" type="application/json" title="Ummah.build Ideas (JSON Feed)" href="https://ideas.ummah.build/feed.json" />
  <link rel="alternate" type="application/rss+xml" title="Ummah.build Ideas (RSS)" href="https://ideas.ummah.build/feed.xml" />
  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Ummah.build Ideas" />
  <meta property="og:title" content="Islamic Tech Ideas Board | Ummah.build" />
  <meta property="og:description" content="Browse and contribute to Islamic tech ideas: prayer tools, mosque, zakat, Quran, Ramadan, Islamic finance. Open source ideas board." />
  <meta property="og:url" content="https://ideas.ummah.build/" />
  <meta property="og:locale" content="en_US" />
  <meta property="og:image" content="https://ideas.ummah.build/og.png" />
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Islamic Tech Ideas Board | Ummah.build" />
  <meta name="twitter:description" content="Browse and contribute to Islamic tech ideas: prayer, mosque, zakat, Quran, Ramadan, Islamic finance. Open source." />
  <meta name="twitter:image" content="https://ideas.ummah.build/og.png" />
  <meta name="theme-color" content="#ffffff" />
  <meta name="format-detection" content="telephone=no" />
  <meta name="author" content="Ummah.build" />
  <meta name="generator" content="Ummah.build Ideas Board" />
  <!-- AI / crawler-friendly summary -->
  <meta name="summary" content="Open source Islamic tech ideas board: 30+ ideas for prayer tools, mosque apps, zakat, Quran, Ramadan, Islamic finance. Filter by category and status. Templates and workflows for taking ideas to production." />
  <style>
    :root {
      --bg: #f7f6f3;
      --surface: #ffffff;
      --surface-hover: #f1f1ef;
      --border: rgba(55, 53, 47, 0.16);
      --text: #37352f;
      --text-muted: #6b6b6b;
      --accent: #0b6bcb;
      --accent-soft: rgba(11, 107, 203, 0.08);
      --success: #0f7b6c;
      --warn: #9a6700;
      --danger: #eb5757;
      --radius: 6px;
      --font: ui-sans-serif, -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
      --font-mono: ui-monospace, monospace;
      --shadow: 0 1px 2px rgba(0,0,0,0.04);
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: var(--font);
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
    }
    .skip-link {
      position: absolute;
      top: -100px;
      left: 0;
      padding: 0.75rem 1rem;
      background: var(--accent);
      color: #fff;
      z-index: 100;
      border-radius: var(--radius);
      text-decoration: none;
      font-weight: 600;
    }
    .skip-link:focus { top: 0; left: 0; }
    header {
      background: var(--surface);
      border-bottom: 1px solid var(--border);
      padding: 2rem 1.5rem 1.5rem;
      max-width: 900px;
      margin: 0 auto;
    }
    header h1 {
      margin: 0;
      font-size: 2rem;
      font-weight: 700;
      letter-spacing: -0.02em;
      color: var(--text);
    }
    header .subtitle {
      margin: 0.5rem 0 0;
      color: var(--text-muted);
      font-size: 1rem;
      line-height: 1.5;
    }
    .about-block {
      margin-top: 1rem;
      padding: 1rem 1.25rem;
      background: var(--surface-hover);
      border-radius: var(--radius);
      font-size: 0.9rem;
      color: var(--text-muted);
    }
    .about-block strong { color: var(--text); }
    .about-block a { color: var(--accent); text-decoration: underline; }
    .about-block a:hover { text-decoration-thickness: 2px; }
    .about-block a:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }
    nav {
      position: sticky;
      top: 0;
      z-index: 40;
      padding: 0.75rem 1.5rem;
      background: var(--surface);
      border-bottom: 1px solid var(--border);
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      align-items: center;
    }
    nav h2 { margin: 0; font-size: 0.8rem; color: var(--text-muted); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }
    .filter-group { display: flex; flex-wrap: wrap; gap: 0.5rem; align-items: center; }
    .filter-group:not(:first-child) { margin-left: 0.5rem; }
    .pill {
      display: inline-block;
      padding: 0.35rem 0.65rem;
      border-radius: var(--radius);
      font-size: 0.8rem;
      cursor: pointer;
      border: 1px solid var(--border);
      background: var(--surface);
      color: var(--text);
      text-decoration: none;
      transition: background 0.12s, border-color 0.12s, color 0.12s;
    }
    .pill:hover { background: var(--surface-hover); border-color: var(--text-muted); }
    .pill.active { background: var(--accent-soft); border-color: var(--accent); color: var(--accent); }
    .pill-favorites { margin-left: 0.25rem; }
    .pill-favorites[aria-pressed="true"] { background: rgba(154, 103, 0, 0.15); border-color: var(--warn); color: var(--warn); }
    .pill:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }
    .search-wrap { margin-left: auto; }
    .search-wrap input {
      padding: 0.45rem 0.75rem;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      background: var(--bg);
      color: var(--text);
      font-size: 0.9rem;
      min-width: 180px;
    }
    .search-wrap input::placeholder { color: var(--text-muted); }
    .search-wrap input:focus { outline: none; border-color: var(--accent); box-shadow: 0 0 0 2px var(--accent-soft); }
    .search-wrap input:focus-visible { outline: 2px solid var(--accent); outline-offset: 0; }
    .sort-wrap, .share-wrap { display: flex; align-items: center; gap: 0.5rem; }
    .sort-wrap label { font-size: 0.8rem; color: var(--text-muted); white-space: nowrap; }
    .sort-wrap select {
      padding: 0.4rem 0.65rem;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      background: var(--surface);
      color: var(--text);
      font-size: 0.85rem;
      cursor: pointer;
    }
    .sort-wrap select:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }
    .share-btn {
      padding: 0.4rem 0.65rem;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      background: var(--surface);
      color: var(--text);
      font-size: 0.85rem;
      cursor: pointer;
      font-family: inherit;
    }
    .share-btn:hover { background: var(--surface-hover); border-color: var(--text-muted); }
    .share-btn:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }
    .pill .count { opacity: 0.7; font-size: 0.75em; margin-left: 0.15rem; }
    .idea-card:target { border-color: var(--accent); box-shadow: 0 0 0 2px var(--accent-soft); scroll-margin-top: 1rem; }
    main {
      padding: 1.5rem;
      max-width: 1200px;
      margin: 0 auto;
    }
    .board-stats { color: var(--text-muted); font-size: 0.875rem; margin-bottom: 1rem; }
    .ideas-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 1rem;
    }
    .ideas-grid.view-list {
      grid-template-columns: 1fr;
      gap: 0.5rem;
    }
    .ideas-grid.view-list .idea-card {
      flex-direction: row;
      align-items: center;
      padding: 0.65rem 1rem;
      gap: 0.75rem;
    }
    .ideas-grid.view-list .idea-card .card-head { margin-bottom: 0; flex: 1; min-width: 0; }
    .ideas-grid.view-list .idea-card .emoji { font-size: 1.25rem; }
    .ideas-grid.view-list .idea-card .description {
      display: none;
    }
    .ideas-grid.view-list .idea-card .badges { margin-top: 0; }
    .ideas-grid.view-list .idea-card .categories-list,
    .ideas-grid.view-list .idea-card .related-ideas,
    .ideas-grid.view-list .idea-card .features-toggle,
    .ideas-grid.view-list .idea-card .features-list { display: none !important; }
    .ideas-grid.view-list .idea-card .card-actions { margin-top: 0; margin-left: auto; }
    .ideas-grid.view-gallery {
      grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
      gap: 1.25rem;
    }
    .ideas-grid.view-gallery .idea-card .emoji { font-size: 2.5rem; }
    .ideas-grid.view-gallery .idea-card .description { -webkit-line-clamp: 3; display: -webkit-box; -webkit-box-orient: vertical; overflow: hidden; }
    .ideas-grid.view-gallery .idea-card .related-ideas,
    .ideas-grid.view-gallery .idea-card .features-toggle,
    .ideas-grid.view-gallery .idea-card .features-list { display: none !important; }
    .view-wrap { display: flex; align-items: center; gap: 0.15rem; }
    .view-btn {
      padding: 0.35rem 0.5rem;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      background: var(--surface);
      color: var(--text-muted);
      font-size: 0.8rem;
      cursor: pointer;
      font-family: inherit;
      min-height: 44px;
    }
    .view-btn:hover { background: var(--surface-hover); color: var(--text); }
    .view-btn.active, .view-btn[aria-pressed="true"] { background: var(--accent-soft); border-color: var(--accent); color: var(--accent); }
    .view-btn:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }
    .ideas-kanban {
      display: flex;
      gap: 1rem;
      overflow-x: auto;
      padding-bottom: 0.5rem;
      align-items: flex-start;
      min-height: 320px;
    }
    .kanban-column {
      min-width: 280px;
      flex: 0 0 280px;
      background: var(--surface-hover);
      border-radius: var(--radius);
      padding: 0.75rem;
      border: 1px solid var(--border);
    }
    .kanban-column h3 {
      margin: 0 0 0.75rem;
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-muted);
      padding-bottom: 0.35rem;
      border-bottom: 1px solid var(--border);
    }
    .kanban-column h3 .kanban-count { font-weight: normal; opacity: 0.85; margin-left: 0.25rem; }
    .kanban-column .column-cards { display: flex; flex-direction: column; gap: 0.5rem; }
    .kanban-column .idea-card { padding: 0.75rem; }
    .kanban-column .idea-card .description { -webkit-line-clamp: 2; display: -webkit-box; -webkit-box-orient: vertical; overflow: hidden; }
    .kanban-column .idea-card .related-ideas,
    .kanban-column .idea-card .categories-list,
    .kanban-column .idea-card .features-toggle,
    .kanban-column .idea-card .features-list { display: none !important; }
    .idea-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 1.25rem;
      display: flex;
      flex-direction: column;
      transition: box-shadow 0.12s, border-color 0.12s;
      box-shadow: var(--shadow);
    }
    .idea-card:hover { border-color: rgba(55, 53, 47, 0.25); box-shadow: 0 2px 8px rgba(0,0,0,0.06); }
    .idea-card .card-head {
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
      margin-bottom: 0.5rem;
    }
    .idea-card .emoji { font-size: 1.75rem; line-height: 1; }
    .idea-card .title-wrap { flex: 1; min-width: 0; }
    .idea-card .title {
      margin: 0;
      font-size: 1.05rem;
      font-weight: 600;
      line-height: 1.4;
    }
    .idea-card .title a { color: inherit; text-decoration: none; }
    .idea-card .title a:hover { color: var(--accent); text-decoration: underline; }
    .idea-card .title a:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }
    .idea-card .description {
      margin: 0.5rem 0 0;
      font-size: 0.9rem;
      color: var(--text-muted);
      line-height: 1.5;
    }
    .idea-card .badges {
      display: flex;
      flex-wrap: wrap;
      gap: 0.35rem;
      margin-top: 0.75rem;
    }
    .badge {
      font-size: 0.7rem;
      padding: 0.2rem 0.5rem;
      border-radius: 4px;
      font-weight: 500;
    }
    .badge-status-ideating { background: var(--surface-hover); color: var(--text-muted); }
    .badge-status-in-progress { background: rgba(154, 103, 0, 0.1); color: var(--warn); }
    .badge-status-production { background: rgba(15, 123, 108, 0.1); color: var(--success); }
    .badge-status-archived { background: rgba(235, 87, 87, 0.1); color: var(--danger); }
    .badge-quality-okay { background: var(--surface-hover); color: var(--text-muted); }
    .badge-quality-good { background: var(--accent-soft); color: var(--accent); }
    .badge-quality-amazing { background: rgba(15, 123, 108, 0.1); color: var(--success); }
    .idea-card .categories-list { margin-top: 0.5rem; font-size: 0.75rem; color: var(--text-muted); }
    .idea-card .related-ideas { margin-top: 0.75rem; padding-top: 0.75rem; border-top: 1px solid var(--border); }
    .idea-card .related-ideas .label { font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-muted); margin-bottom: 0.35rem; }
    .idea-card .related-ideas a { font-size: 0.8rem; color: var(--accent); text-decoration: none; margin-right: 0.5rem; }
    .idea-card .related-ideas a:hover { text-decoration: underline; }
    .features-toggle {
      margin-top: auto;
      padding-top: 0.75rem;
      font-size: 0.8rem;
      color: var(--accent);
      cursor: pointer;
      background: none;
      border: none;
      text-align: left;
      font-family: inherit;
    }
    .features-toggle:hover { text-decoration: underline; }
    .features-toggle:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }
    .features-list {
      margin-top: 0.5rem;
      padding-left: 1.25rem;
      font-size: 0.85rem;
      color: var(--text-muted);
      line-height: 1.5;
      display: none;
    }
    .features-list.visible { display: block; }
    .features-list li { margin-bottom: 0.25rem; }
    footer {
      margin-top: 2.5rem;
      padding: 1.5rem;
      border-top: 1px solid var(--border);
      text-align: center;
      color: var(--text-muted);
      font-size: 0.875rem;
    }
    footer a { color: var(--accent); text-decoration: none; }
    footer a:hover { text-decoration: underline; }
    footer a:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }
    footer .footer-links { display: flex; flex-wrap: wrap; justify-content: center; gap: 0.5rem 1rem; margin-bottom: 0.5rem; }
    .loading { text-align: center; padding: 3rem; color: var(--text-muted); }
    .no-results { padding: 2rem; text-align: center; color: var(--text-muted); }
    .visually-hidden { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0; }
    .copy-toast { position: fixed; bottom: 1.5rem; left: 50%; transform: translateX(-50%); padding: 0.5rem 1rem; background: var(--success); color: #fff; border-radius: var(--radius); font-size: 0.9rem; font-weight: 500; opacity: 0; pointer-events: none; transition: opacity 0.2s; z-index: 100; }
    .copy-toast.visible { opacity: 1; }

    /* Touch targets min 44px (WCAG 2.5.5), focus visible for keyboard */
    .pill { min-height: 44px; min-width: 44px; display: inline-flex; align-items: center; justify-content: center; }
    .share-btn { min-height: 44px; min-width: 44px; }
    .search-wrap input { min-height: 44px; }
    .sort-wrap select { min-height: 44px; }

    /* Mobile responsive */
    @media (max-width: 768px) {
      header { padding: 1.25rem 1rem 1rem; }
      header h1 { font-size: 1.5rem; }
      header .subtitle { font-size: 0.95rem; }
      .about-block { padding: 0.875rem 1rem; font-size: 0.875rem; }
      nav { padding: 0.75rem 1rem; gap: 0.5rem; }
      nav .filter-group:not(:first-child) { margin-left: 0; margin-top: 0.25rem; }
      .filter-group { width: 100%; }
      .filter-group[role="group"] { flex: 1 1 100%; }
      .view-wrap { flex-wrap: wrap; }
      .view-btn { padding: 0.3rem 0.4rem; font-size: 0.75rem; min-height: 40px; }
      .search-wrap { order: 10; width: 100%; margin-left: 0; margin-top: 0.5rem; }
      .search-wrap input { min-width: 100%; width: 100%; }
      .search-hint { display: none; }
      .sort-wrap, .share-wrap { margin-left: 0; }
      main { padding: 1rem; }
      .ideas-grid { grid-template-columns: 1fr; gap: 0.75rem; }
      .ideas-kanban { min-width: 0; }
      .kanban-column { min-width: 260px; flex: 0 0 260px; }
      .idea-card { padding: 1rem; }
      footer { padding: 1rem; margin-top: 1.5rem; }
      .footer-links { gap: 0.5rem; }
    }

    @media (max-width: 480px) {
      header h1 { font-size: 1.35rem; }
      .pill .count { display: none; }
      .copy-toast { left: 1rem; right: 1rem; transform: none; bottom: 1rem; text-align: center; }
    }

    /* Safe area for notched devices */
    @supports (padding: env(safe-area-inset-bottom)) {
      .copy-toast { bottom: calc(1.5rem + env(safe-area-inset-bottom)); }
      @media (max-width: 480px) { .copy-toast { bottom: calc(1rem + env(safe-area-inset-bottom)); } }
    }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce) {
      * { transition-duration: 0.01ms !important; }
      .idea-card:hover { transition: none; }
    }

    /* Dark theme */
    html.theme-dark {
      color-scheme: dark;
    }
    .theme-dark {
      --bg: #191919;
      --surface: #252525;
      --surface-hover: #2f2f2f;
      --border: rgba(255, 255, 255, 0.12);
      --text: #e3e2e0;
      --text-muted: #9b9a97;
      --accent: #6eb3f7;
      --accent-soft: rgba(110, 179, 247, 0.12);
      --success: #4ecdc4;
      --warn: #e6b800;
      --danger: #ff6b6b;
      --shadow: 0 1px 3px rgba(0,0,0,0.3);
    }
    .theme-dark .idea-card:hover { border-color: rgba(255,255,255,0.2); box-shadow: 0 2px 12px rgba(0,0,0,0.4); }
    .theme-btn, .export-btn {
      padding: 0.4rem 0.65rem;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      background: var(--surface);
      color: var(--text);
      font-size: 0.85rem;
      cursor: pointer;
      font-family: inherit;
      min-height: 44px;
      min-width: 44px;
    }
    .theme-btn:hover, .export-btn:hover { background: var(--surface-hover); border-color: var(--text-muted); }
    .theme-btn:focus-visible, .export-btn:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }
    .theme-btn { font-size: 1.1rem; line-height: 1; }
    .no-results .clear-filters { margin-top: 0.75rem; padding: 0.5rem 1rem; border-radius: var(--radius); border: 1px solid var(--border); background: var(--surface); color: var(--accent); cursor: pointer; font-family: inherit; font-size: 0.9rem; }
    .no-results .clear-filters:hover { background: var(--surface-hover); }
    .no-results .clear-filters:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }
    .no-results .inline { margin: 0 0.2rem; padding: 0.2rem 0.5rem; font-size: 0.85em; }
    .no-results a { color: var(--accent); text-decoration: none; }
    .no-results a:hover { text-decoration: underline; }
    .quick-filters { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 0.75rem; }
    .quick-filters .pill { margin: 0; }
    .recently-viewed { margin-bottom: 1rem; padding: 0.75rem 0; border-bottom: 1px solid var(--border); font-size: 0.875rem; color: var(--text-muted); }
    .recently-viewed .label { margin-right: 0.5rem; font-weight: 500; color: var(--text); }
    .recently-viewed a { color: var(--accent); text-decoration: none; margin-right: 0.75rem; }
    .recently-viewed a:hover { text-decoration: underline; }
    .shortcut-help { position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 200; display: flex; align-items: center; justify-content: center; padding: 1rem; opacity: 0; pointer-events: none; transition: opacity 0.2s; }
    .shortcut-help.visible { opacity: 1; pointer-events: auto; }
    .shortcut-help .inner { background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius); padding: 1.25rem; max-width: 320px; }
    .shortcut-help h3 { margin: 0 0 0.75rem; font-size: 1rem; }
    .shortcut-help kbd { background: var(--surface-hover); padding: 0.15rem 0.4rem; border-radius: 4px; font-size: 0.85em; }
    .shortcut-help p { margin: 0.35rem 0; font-size: 0.9rem; }
    .shortcut-help .close { margin-top: 1rem; padding: 0.4rem 0.75rem; cursor: pointer; }
    .search-wrap input { padding-right: 2rem; }
    .search-hint { position: absolute; right: 0.75rem; top: 50%; transform: translateY(-50%); font-size: 0.75rem; color: var(--text-muted); pointer-events: none; }
    .search-wrap { position: relative; }
    .card-actions { display: flex; align-items: center; gap: 0.5rem; margin-top: 0.5rem; flex-wrap: wrap; }
    .card-actions .btn-icon { background: none; border: none; color: var(--text-muted); cursor: pointer; padding: 0.25rem; font-size: 0.85rem; line-height: 1; border-radius: var(--radius); }
    .card-actions .btn-icon:hover { color: var(--accent); }
    .card-actions .btn-icon:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }
    .card-actions .btn-icon.faved { color: var(--warn); }
    .card-actions a.btn-icon { text-decoration: none; }
    .main-actions { display: flex; flex-wrap: wrap; gap: 0.5rem; align-items: center; margin-bottom: 0.75rem; }
    .main-actions .btn-secondary { padding: 0.4rem 0.75rem; border-radius: var(--radius); border: 1px solid var(--border); background: var(--surface); color: var(--text); font-size: 0.85rem; cursor: pointer; font-family: inherit; }
    .main-actions .btn-secondary:hover { background: var(--surface-hover); }
    .main-actions .btn-secondary:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }
    .board-stats .stats-breakdown { font-weight: normal; opacity: 0.9; }
    .export-dropdown { position: relative; display: inline-block; }
    .export-dropdown .export-menu { display: none; position: absolute; top: 100%; right: 0; margin-top: 0.25rem; background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius); box-shadow: var(--shadow); z-index: 50; min-width: 140px; }
    .export-dropdown.open .export-menu { display: block; }
    .export-dropdown .export-menu button { display: block; width: 100%; padding: 0.5rem 0.75rem; text-align: left; background: none; border: none; font-family: inherit; font-size: 0.85rem; color: var(--text); cursor: pointer; }
    .export-dropdown .export-menu button:hover { background: var(--surface-hover); }
  </style>
</head>
<body>
  <a href="#main" class="skip-link">Skip to main content</a>
  <header>
    <h1>Islamic Tech Ideas Board</h1>
    <p class="subtitle">Open source ideas for prayer tools, mosque apps, zakat, Quran, Ramadan, and Islamic finance. Filter by category and status, then use templates and workflows to take ideas into production.</p>
    <div class="about-block" id="about-block">
      <strong>What this is:</strong> A curated list of Islamic tech ideas from <a href="https://ummah.build">Ummah.build</a>. Each idea has a description, status, and feature list. <strong>Edit entries:</strong> use <strong>Edit</strong> on a card or idea page (opens the markdown file on GitHub); PRs run the build and deploy to this site. Use the <a href="https://github.com/ummahbuild/ideas/tree/main/docs/templates">templates</a> and <a href="https://github.com/ummahbuild/ideas/tree/main/docs/workflows">workflows</a> to go from idea to MVP. Subscribe: <a href="/feed.json">JSON Feed</a>, <a href="/feed.xml">RSS</a>.
    </div>
  </header>
  <nav aria-label="Filter ideas">
    <div class="filter-group">
      <h2 id="filter-cat-label">Category</h2>
      <div class="filter-group" role="group" aria-labelledby="filter-cat-label" id="category-filters"></div>
    </div>
    <div class="filter-group">
      <h2 id="filter-status-label">Status</h2>
      <div class="filter-group" role="group" aria-labelledby="filter-status-label" id="status-filters"></div>
      <button type="button" class="pill pill-favorites" id="favorites-pill" aria-pressed="false" title="Show only favorited ideas">‚≠ê Favorites (<span id="favorites-count">0</span>)</button>
    </div>
    <div class="sort-wrap">
      <label for="sort-select">Sort</label>
      <select id="sort-select" aria-label="Sort ideas">
        <option value="default">Default</option>
        <option value="title">Title A‚ÄìZ</option>
        <option value="quality">Quality</option>
        <option value="status">Status</option>
      </select>
    </div>
    <div class="view-wrap" role="group" aria-label="View mode">
      <button type="button" class="view-btn active" data-view="grid" aria-pressed="true" title="Grid view">‚ñ¶ Grid</button>
      <button type="button" class="view-btn" data-view="list" aria-pressed="false" title="List view">‚â° List</button>
      <button type="button" class="view-btn" data-view="gallery" aria-pressed="false" title="Gallery view">‚äû Gallery</button>
      <button type="button" class="view-btn" data-view="kanban" aria-pressed="false" title="Kanban by status">‚ñ§ Kanban</button>
    </div>
    <div class="search-wrap">
      <label for="search-input" class="visually-hidden">Search ideas</label>
      <input type="search" id="search-input" placeholder="Search ideas..." aria-label="Search ideas" autocomplete="off" />
      <span class="search-hint" aria-hidden="true">/ to focus</span>
    </div>
    <div class="share-wrap">
      <div class="export-dropdown" id="export-dropdown">
        <button type="button" class="export-btn" id="export-btn" aria-label="Export filtered ideas" aria-haspopup="true" aria-expanded="false">Export ‚ñæ</button>
        <div class="export-menu" role="menu">
          <button type="button" role="menuitem" id="export-json">JSON</button>
          <button type="button" role="menuitem" id="export-csv">CSV</button>
        </div>
      </div>
      <button type="button" class="share-btn" id="share-btn" aria-label="Copy link to current view">Copy link</button>
      <button type="button" class="theme-btn" id="theme-btn" aria-label="Toggle dark mode" title="Toggle dark mode">üåì</button>
    </div>
  </nav>
  <main id="main" role="main" aria-label="Ideas list">
    <p class="board-stats" id="board-stats" aria-live="polite">Loading‚Ä¶</p>
    <div class="quick-filters" id="quick-filters" aria-label="Quick filters"></div>
    <div class="recently-viewed" id="recently-viewed" style="display:none;"></div>
    <div class="main-actions" id="main-actions" style="display:none;">
      <button type="button" class="btn-secondary" id="surprise-btn">Surprise me</button>
      <button type="button" class="btn-secondary" id="expand-all-btn">Expand all</button>
      <button type="button" class="btn-secondary" id="collapse-all-btn">Collapse all</button>
    </div>
    <div class="ideas-grid" id="ideas-grid"></div>
    <p class="no-results" id="no-results" style="display:none;"><span class="no-results-msg">No ideas match your filters.</span> Try: <button type="button" class="clear-filters inline" data-quick="production">Production</button> <button type="button" class="clear-filters inline" data-quick="in-progress">In progress</button> or <button type="button" class="clear-filters" id="clear-filters">Clear all filters</button>. Or <a href="https://github.com/ummahbuild/ideas/issues/new?template=new_idea.md">suggest an idea</a>.</p>
  </main>
  <div class="shortcut-help" id="shortcut-help" role="dialog" aria-label="Keyboard shortcuts" aria-hidden="true"></div>
  <footer>
    <div class="footer-links">
      <a href="https://github.com/ummahbuild/ideas/blob/main/CONTRIBUTING.md">Contribute</a>
      <a href="https://github.com/ummahbuild/ideas/tree/main/docs/templates">Templates</a>
      <a href="https://github.com/ummahbuild/ideas/tree/main/docs/workflows">Workflows</a>
      <a href="https://github.com/ummahbuild/ideas/blob/main/IMPROVEMENTS.md">Improvements</a>
      <a href="https://github.com/ummahbuild/ideas">GitHub</a>
      <a href="https://ummah.build">Ummah.build</a>
      <a href="https://ideas.ummah.build/sitemap.xml">Sitemap</a>
    </div>
    <p>Islamic tech ideas board ¬∑ <a href="https://ideas.ummah.build">ideas.ummah.build</a></p>
  </footer>
  <div id="copy-toast" class="copy-toast" aria-live="polite" role="status"></div>

  <script>
    (function () {
      const BASE_URL = 'https://ideas.ummah.build';
      const THEME_KEY = 'ideas-theme';
      const FAVORITES_KEY = 'ideas-favorites';
      const RECENT_KEY = 'ideas-recent';
      const VIEW_KEY = 'ideas-view';
      const RECENT_MAX = 5;
      let ideas = [];
      let categories = [];
      let activeCategory = '';
      let activeStatus = '';
      let searchQuery = '';
      let sortBy = 'default';
      let showFavoritesOnly = false;
      let qualityFilter = '';
      let viewMode = 'grid';
      var searchDebounceTimer = null;

      if (window.location.hash && window.location.hash.indexOf('#idea-') === 0) {
        var slugFromHash = window.location.hash.slice(6);
        if (slugFromHash) window.location.replace(BASE_URL + '/idea/' + slugFromHash + '/');
      }

      function getFavorites() {
        try {
          var raw = localStorage.getItem(FAVORITES_KEY);
          return raw ? new Set(JSON.parse(raw)) : new Set();
        } catch (e) { return new Set(); }
      }
      function saveFavorites(set) {
        try { localStorage.setItem(FAVORITES_KEY, JSON.stringify([].slice.call(set))); } catch (e) {}
      }
      function toggleFavorite(slug) {
        var fav = getFavorites();
        if (fav.has(slug)) fav.delete(slug); else fav.add(slug);
        saveFavorites(fav);
      }

      function getThemePreference() {
        try { return localStorage.getItem(THEME_KEY) || 'auto'; } catch (e) { return 'auto'; }
      }
      function setThemePreference(val) {
        try { localStorage.setItem(THEME_KEY, val); } catch (e) {}
      }
      function applyTheme() {
        var pref = getThemePreference();
        var dark = pref === 'dark' || (pref === 'auto' && window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches);
        document.documentElement.classList.toggle('theme-dark', dark);
        var btn = document.getElementById('theme-btn');
        if (btn) btn.setAttribute('aria-label', dark ? 'Switch to light mode' : 'Switch to dark mode');
      }

      function escapeHtml(s) {
        const div = document.createElement('div');
        div.textContent = s;
        return div.innerHTML;
      }

      function getParams() {
        const params = new URLSearchParams(window.location.search);
        return {
          category: params.get('category') || '',
          status: params.get('status') || '',
          q: params.get('q') || '',
          sort: params.get('sort') || 'default',
          view: params.get('view') || ''
        };
      }

      function getViewPreference() {
        try { return localStorage.getItem(VIEW_KEY) || 'grid'; } catch (e) { return 'grid'; }
      }
      function setViewPreference(val) {
        try { localStorage.setItem(VIEW_KEY, val); } catch (e) {}
      }

      function pushUrl() {
        const url = new URL(window.location.href);
        url.searchParams.set('category', activeCategory);
        url.searchParams.set('status', activeStatus);
        url.searchParams.set('q', searchQuery);
        url.searchParams.set('sort', sortBy);
        if (viewMode && viewMode !== 'grid') url.searchParams.set('view', viewMode);
        ['category', 'status', 'q', 'sort', 'view'].forEach(function (k) {
          if (!url.searchParams.get(k)) url.searchParams.delete(k);
        });
        window.history.replaceState({}, '', url.pathname + (url.search || '') + (url.hash || ''));
      }

      function getRecentSlugs() {
        try {
          var raw = localStorage.getItem(RECENT_KEY);
          return raw ? JSON.parse(raw) : [];
        } catch (e) { return []; }
      }
      function filterIdeas() {
        var favorites = getFavorites();
        return ideas.filter(function (idea) {
          if (showFavoritesOnly && !favorites.has((idea.slug || idea.id || '').toString())) return false;
          if (qualityFilter === 'high' && (!idea.quality || (idea.quality !== 'amazing' && idea.quality !== 'good'))) return false;
          if (activeCategory && (!idea.categories || !idea.categories.includes(activeCategory))) return false;
          if (activeStatus && idea.status !== activeStatus) return false;
          if (searchQuery) {
            const q = searchQuery.toLowerCase();
            const title = (idea.title || '').toLowerCase();
            const desc = (idea.description || '').toLowerCase();
            const slug = (idea.slug || '').toLowerCase();
            const reqs = (idea.requirements || []).join(' ').toLowerCase();
            if (!title.includes(q) && !desc.includes(q) && !slug.includes(q) && !reqs.includes(q)) return false;
          }
          return true;
        });
      }

      function sortIdeas(list) {
        const qualityOrder = { amazing: 0, good: 1, okay: 2 };
        const statusOrder = { production: 0, 'in-progress': 1, ideating: 2, archived: 3 };
        if (sortBy === 'title') {
          return list.slice().sort(function (a, b) { return (a.title || '').localeCompare(b.title || ''); });
        }
        if (sortBy === 'quality') {
          return list.slice().sort(function (a, b) {
            return (qualityOrder[a.quality] ?? 3) - (qualityOrder[b.quality] ?? 3);
          });
        }
        if (sortBy === 'status') {
          return list.slice().sort(function (a, b) {
            return (statusOrder[a.status] ?? 4) - (statusOrder[b.status] ?? 4);
          });
        }
        return list.slice().sort(function (a, b) { return Number(a.id) - Number(b.id) || 0; });
      }

      function getRelatedIdeas(idea, allIdeas, limit) {
        var related = [];
        var ids = {};
        ids[idea.id] = true;
        if (idea.relatedSlugs && idea.relatedSlugs.length) {
          idea.relatedSlugs.forEach(function (s) {
            if (related.length >= limit) return;
            var other = allIdeas.find(function (i) { return (i.slug || i.id) === s; });
            if (other && !ids[other.id]) { related.push(other); ids[other.id] = true; }
          });
        }
        var cats = idea.categories || [];
        if (cats.length && related.length < limit) {
          allIdeas.forEach(function (i) {
            if (related.length >= limit || ids[i.id]) return;
            var shared = (i.categories || []).filter(function (c) { return cats.indexOf(c) >= 0; });
            if (shared.length) { related.push(i); ids[i.id] = true; }
          });
        }
        if (related.length < limit) {
          allIdeas.forEach(function (i) {
            if (related.length >= limit || ids[i.id]) return;
            if (i.status === idea.status) { related.push(i); ids[i.id] = true; }
          });
        }
        return related.slice(0, limit);
      }

      function countByCategory() {
        const out = {};
        (categories.categories || []).forEach(function (c) { out[c.slug] = 0; });
        ideas.forEach(function (idea) {
          (idea.categories || []).forEach(function (slug) { if (out[slug] !== undefined) out[slug]++; });
        });
        return out;
      }

      function countByStatus() {
        const out = { '': ideas.length, ideating: 0, 'in-progress': 0, production: 0, archived: 0 };
        ideas.forEach(function (i) { if (out[i.status] !== undefined) out[i.status]++; });
        return out;
      }

      function renderCategoryFilters() {
        const container = document.getElementById('category-filters');
        if (!container) return;
        container.innerHTML = '';
        const catCounts = countByCategory();
        const allCount = ideas.length;
        const all = document.createElement('button');
        all.type = 'button';
        all.className = 'pill' + (activeCategory ? '' : ' active');
        all.innerHTML = 'All <span class="count">(' + allCount + ')</span>';
        all.addEventListener('click', function () { activeCategory = ''; applyFilters(); });
        container.appendChild(all);
        (categories.categories || []).forEach(function (cat) {
          const b = document.createElement('button');
          b.type = 'button';
          b.className = 'pill' + (activeCategory === cat.slug ? ' active' : '');
          b.innerHTML = cat.name + ' <span class="count">(' + (catCounts[cat.slug] || 0) + ')</span>';
          b.addEventListener('click', function () { activeCategory = cat.slug; applyFilters(); });
          container.appendChild(b);
        });
      }

      function renderStatusFilters() {
        const statuses = [
          { value: '', label: 'All' },
          { value: 'ideating', label: 'Ideating' },
          { value: 'in-progress', label: 'In progress' },
          { value: 'production', label: 'Production' },
          { value: 'archived', label: 'Archived' }
        ];
        const container = document.getElementById('status-filters');
        if (!container) return;
        container.innerHTML = '';
        const statusCounts = countByStatus();
        statuses.forEach(function (s) {
          const b = document.createElement('button');
          b.type = 'button';
          b.className = 'pill' + (activeStatus === s.value ? ' active' : '');
          b.innerHTML = s.label + ' <span class="count">(' + (statusCounts[s.value] ?? 0) + ')</span>';
          b.addEventListener('click', function () { activeStatus = s.value; applyFilters(); });
          container.appendChild(b);
        });
      }

      function applyFilters() {
        document.querySelectorAll('#category-filters .pill').forEach(function (p, i) {
          if (i === 0) p.classList.toggle('active', !activeCategory);
          else {
            const cat = (categories.categories || [])[i - 1];
            p.classList.toggle('active', cat && activeCategory === cat.slug);
          }
        });
        document.querySelectorAll('#status-filters .pill').forEach(function (p, i) {
          const statusValues = ['', 'ideating', 'in-progress', 'production', 'archived'];
          p.classList.toggle('active', activeStatus === statusValues[i]);
        });
        var filtered = filterIdeas();
        filtered = sortIdeas(filtered);
        renderIdeas(filtered);
        var statsEl = document.getElementById('board-stats');
        var breakdown = countByStatus();
        var breakdownStr = breakdown.production + ' production ¬∑ ' + breakdown['in-progress'] + ' in progress ¬∑ ' + breakdown.ideating + ' ideating';
        statsEl.textContent = filtered.length + ' of ' + ideas.length + ' ideas';
        statsEl.innerHTML = filtered.length + ' of ' + ideas.length + ' ideas <span class="stats-breakdown">(' + breakdownStr + ')</span>';
        document.getElementById('no-results').style.display = filtered.length ? 'none' : 'block';
        var mainActions = document.getElementById('main-actions');
        if (mainActions) mainActions.style.display = filtered.length ? 'flex' : 'none';
        var favCount = document.getElementById('favorites-count');
        var fav = getFavorites();
        if (favCount) favCount.textContent = fav.size;
        var favPill = document.getElementById('favorites-pill');
        if (favPill) favPill.setAttribute('aria-pressed', showFavoritesOnly ? 'true' : 'false');
        renderQuickFilters();
        renderRecentlyViewed();
        pushUrl();
      }

      function renderQuickFilters() {
        var el = document.getElementById('quick-filters');
        if (!el) return;
        el.innerHTML = '';
        var q = [
          { id: 'production', label: 'Production only', status: 'production', quality: '' },
          { id: 'in-progress', label: 'In progress', status: 'in-progress', quality: '' },
          { id: 'high-quality', label: 'High quality', status: '', quality: 'high' }
        ];
        q.forEach(function (opt) {
          var btn = document.createElement('button');
          btn.type = 'button';
          var isActive = (opt.status && activeStatus === opt.status && !qualityFilter) || (opt.quality && qualityFilter === opt.quality);
          btn.className = 'pill' + (isActive ? ' active' : '');
          btn.textContent = opt.label;
          btn.addEventListener('click', function () {
            qualityFilter = opt.quality || '';
            activeStatus = opt.status || '';
            applyFilters();
          });
          el.appendChild(btn);
        });
      }

      function renderRecentlyViewed() {
        var el = document.getElementById('recently-viewed');
        if (!el) return;
        var slugs = getRecentSlugs();
        if (slugs.length === 0) { el.style.display = 'none'; return; }
        var links = slugs.slice(0, RECENT_MAX).map(function (s) {
          var idea = ideas.find(function (i) { return (i.slug || i.id) === s; });
          var title = idea ? idea.title : s;
          return '<a href="' + BASE_URL + '/idea/' + escapeHtml(s) + '/">' + escapeHtml(title) + '</a>';
        }).join('');
        el.innerHTML = '<span class="label">Recently viewed:</span> ' + links;
        el.style.display = 'block';
      }

      function buildCardElement(idea) {
          const slug = (idea.slug || idea.id || '').toString();
          const card = document.createElement('article');
          card.className = 'idea-card';
          card.id = 'idea-' + escapeHtml(slug);
          card.setAttribute('data-slug', slug);
          const catNames = (idea.categories || []).map(function (s) {
            const c = (categories.categories || []).find(x => x.slug === s);
            return c ? c.name : s;
          }).join(', ');
          const titleEsc = escapeHtml(idea.title || 'Untitled');
          const descEsc = escapeHtml(idea.description || '');
          const ideaPageUrl = BASE_URL + '/idea/' + slug + '/';
          const titleHtml = '<a href="' + escapeHtml(ideaPageUrl) + '">' + titleEsc + '</a>';
          var categoriesHtml = catNames ? '<div class="categories-list">' + escapeHtml(catNames) + '</div>' : '';
          var related = getRelatedIdeas(idea, ideas, 4);
          var relatedHtml = '';
          if (related.length) {
            relatedHtml = '<div class="related-ideas"><span class="label">Related</span> ' +
              related.map(function (r) {
                var s = (r.slug || r.id || '').toString();
                var t = escapeHtml(r.title || 'Untitled');
                return '<a href="' + BASE_URL + '/idea/' + escapeHtml(s) + '/">' + t + '</a>';
              }).join(', ') + '</div>';
          }
          const reqs = idea.requirements || [];
          var featuresHtml = '';
          if (reqs.length) {
            featuresHtml = '<button type="button" class="features-toggle" aria-expanded="false">' + reqs.length + ' features</button>' +
              '<ul class="features-list">' +
              reqs.map(function (r) { return '<li>' + escapeHtml(r) + '</li>'; }).join('') + '</ul>';
          }
          var fav = getFavorites().has(slug);
          var editUrl = 'https://github.com/ummahbuild/ideas/edit/main/src/content/ideas/' + encodeURIComponent(slug) + '.md';
          var cardActionsHtml = '<div class="card-actions">' +
            '<button type="button" class="btn-icon btn-fav ' + (fav ? 'faved' : '') + '" data-slug="' + escapeHtml(slug) + '" aria-label="' + (fav ? 'Remove from favorites' : 'Add to favorites') + '">' + (fav ? '‚òÖ' : '‚òÜ') + '</button>' +
            '<button type="button" class="btn-icon btn-copy-card" data-slug="' + escapeHtml(slug) + '" aria-label="Copy link to this idea">Copy link</button>' +
            '<a href="' + escapeHtml(editUrl) + '" class="btn-icon" target="_blank" rel="noopener noreferrer" aria-label="Edit this idea on GitHub">Edit</a>' +
            '</div>';
          card.innerHTML =
            '<div class="card-head">' +
              '<span class="emoji" aria-hidden="true">' + (idea.emoji || 'üí°') + '</span>' +
              '<div class="title-wrap">' +
                '<h2 class="title">' + titleHtml + '</h2>' +
                '<p class="description">' + descEsc + '</p>' +
              '</div>' +
            '</div>' +
            '<div class="badges">' +
              '<span class="badge badge-status-' + (idea.status || 'ideating') + '">' + escapeHtml((idea.status || 'ideating').replace(/-/g, ' ')) + '</span>' +
              (idea.quality ? '<span class="badge badge-quality-' + idea.quality + '">' + escapeHtml(idea.quality) + '</span>' : '') +
            '</div>' +
            categoriesHtml +
            relatedHtml +
            cardActionsHtml +
            featuresHtml;
          var toggle = card.querySelector('.features-toggle');
          var featList = card.querySelector('.features-list');
          if (toggle && featList) {
            toggle.addEventListener('click', function () {
              featList.classList.toggle('visible');
              toggle.setAttribute('aria-expanded', featList.classList.contains('visible'));
            });
          }
          var btnFav = card.querySelector('.btn-fav');
          if (btnFav) {
            btnFav.addEventListener('click', function () {
              var s = this.getAttribute('data-slug');
              toggleFavorite(s);
              this.classList.toggle('faved', getFavorites().has(s));
              this.textContent = getFavorites().has(s) ? '‚òÖ' : '‚òÜ';
              this.setAttribute('aria-label', getFavorites().has(s) ? 'Remove from favorites' : 'Add to favorites');
              applyFilters();
            });
          }
          var btnCopyCard = card.querySelector('.btn-copy-card');
          if (btnCopyCard) {
            btnCopyCard.addEventListener('click', function () {
              var s = this.getAttribute('data-slug');
              var url = BASE_URL + '/idea/' + s + '/';
              navigator.clipboard.writeText(url).then(function () { showCopyToast('Link copied'); }).catch(function () { showCopyToast('Copy failed'); });
            });
          }
          return card;
        }

      function renderIdeas(list) {
        const grid = document.getElementById('ideas-grid');
        if (viewMode === 'kanban') {
          grid.className = 'ideas-kanban';
          grid.id = 'ideas-grid';
          const statuses = ['ideating', 'in-progress', 'production', 'archived'];
          const labels = { 'ideating': 'Ideating', 'in-progress': 'In progress', 'production': 'Production', 'archived': 'Archived' };
          const byStatus = {};
          statuses.forEach(function (s) { byStatus[s] = []; });
          list.forEach(function (idea) {
            var s = idea.status || 'ideating';
            if (byStatus[s]) byStatus[s].push(idea);
          });
          grid.innerHTML = statuses.map(function (s) {
            var count = (byStatus[s] || []).length;
            return '<div class="kanban-column" data-status="' + escapeHtml(s) + '">' +
              '<h3>' + escapeHtml(labels[s]) + ' <span class="kanban-count">' + count + '</span></h3>' +
              '<div class="column-cards"></div></div>';
          }).join('');
          statuses.forEach(function (s) {
            var col = grid.querySelector('.kanban-column[data-status="' + s + '"] .column-cards');
            (byStatus[s] || []).forEach(function (idea) {
              col.appendChild(buildCardElement(idea));
            });
          });
        } else {
          grid.className = 'ideas-grid view-' + viewMode;
          grid.id = 'ideas-grid';
          grid.innerHTML = '';
          list.forEach(function (idea) {
            grid.appendChild(buildCardElement(idea));
          });
        }
        var hash = window.location.hash.slice(1);
        if (hash && hash.startsWith('idea-')) {
          var el = document.getElementById(hash);
          if (el) {
            el.scrollIntoView({ behavior: 'smooth', block: 'start' });
            var t = el.querySelector('.features-toggle');
            if (t) { t.click(); }
          }
        }
      }

      function injectJsonLd() {
        var list = ideas;
        var itemListElement = list.map(function (idea, idx) {
          var slug = idea.slug || idea.id;
          return {
            '@type': 'ListItem',
            position: idx + 1,
            item: {
              '@type': 'SoftwareApplication',
              '@id': BASE_URL + '/idea/' + (slug || '') + '/',
              name: idea.title,
              description: idea.description,
              applicationCategory: 'LifestyleApplication',
              url: idea.url || BASE_URL + '/idea/' + (slug || '') + '/'
            }
          };
        });
        var itemList = {
          '@context': 'https://schema.org',
          '@type': 'ItemList',
          name: 'Islamic Tech Ideas ‚Äì Ummah.build',
          description: 'Open source ideas for Islamic tech: prayer tools, mosque, zakat, Quran, Ramadan, Islamic finance. Browse and contribute.',
          numberOfItems: list.length,
          itemListElement: itemListElement
        };
        var website = {
          '@context': 'https://schema.org',
          '@type': 'WebSite',
          name: 'Ummah.build Ideas',
          url: BASE_URL + '/',
          description: 'Open source Islamic tech ideas board. Prayer tools, mosque, zakat, Quran, Ramadan, Islamic finance.',
          publisher: { '@type': 'Organization', name: 'Ummah.build', url: 'https://ummah.build' },
          potentialAction: { '@type': 'SearchAction', target: { '@type': 'EntryPoint', urlTemplate: BASE_URL + '/?q={search_term_string}' }, 'query-input': 'required name=search_term_string' }
        };
        var breadcrumb = {
          '@context': 'https://schema.org',
          '@type': 'BreadcrumbList',
          itemListElement: [
            { '@type': 'ListItem', position: 1, name: 'Ummah.build', item: 'https://ummah.build' },
            { '@type': 'ListItem', position: 2, name: 'Ideas Board', item: BASE_URL + '/' }
          ]
        };
        var faq = {
          '@context': 'https://schema.org',
          '@type': 'FAQPage',
          mainEntity: [
            { '@type': 'Question', name: 'What is the Ummah.build Ideas Board?', acceptedAnswer: { '@type': 'Answer', text: 'An open source board of Islamic tech ideas: prayer tools, mosque apps, zakat, Quran, Ramadan, Islamic finance. You can browse ideas by category and status, and use templates and workflows to take ideas from the board into production.' } },
            { '@type': 'Question', name: 'How do I take an idea into production?', acceptedAnswer: { '@type': 'Answer', text: 'Use the idea dissection template to define problem and solution, run the Islamic authenticity checklist if needed, then follow the go-to-market and personas/messaging templates. Full workflow is in the repo under docs/workflows.' } }
          ]
        };
        function addScript(data) {
          var script = document.createElement('script');
          script.type = 'application/ld+json';
          script.textContent = JSON.stringify(data);
          document.head.appendChild(script);
        }
        addScript(website);
        addScript(breadcrumb);
        addScript(itemList);
        addScript(faq);
      }

      function showCopyToast(msg) {
        var toast = document.getElementById('copy-toast');
        if (!toast) return;
        toast.textContent = msg;
        toast.classList.add('visible');
        setTimeout(function () { toast.classList.remove('visible'); }, 2000);
      }

      function exportFilteredJson() {
        var filtered = filterIdeas();
        var sorted = sortIdeas(filtered);
        var blob = new Blob([JSON.stringify(sorted, null, 2)], { type: 'application/json' });
        var a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = 'ummah-ideas-filtered-' + new Date().toISOString().slice(0, 10) + '.json';
        a.click();
        URL.revokeObjectURL(a.href);
        showCopyToast('Exported ' + sorted.length + ' ideas');
      }

      function exportFilteredCsv() {
        var filtered = filterIdeas();
        var sorted = sortIdeas(filtered);
        function escapeCsv(s) {
          if (s == null) return '';
          var str = String(s);
          if (/[",\n\r]/.test(str)) return '"' + str.replace(/"/g, '""') + '"';
          return str;
        }
        var rows = [['title', 'description', 'status', 'quality', 'url', 'slug', 'categories', 'requirements'].join(',')];
        sorted.forEach(function (idea) {
          rows.push([
            escapeCsv(idea.title),
            escapeCsv(idea.description),
            escapeCsv(idea.status),
            escapeCsv(idea.quality),
            escapeCsv(idea.url),
            escapeCsv(idea.slug),
            escapeCsv((idea.categories || []).join(';')),
            escapeCsv((idea.requirements || []).join('; '))
          ].join(','));
        });
        var blob = new Blob([rows.join('\r\n')], { type: 'text/csv;charset=utf-8' });
        var a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = 'ummah-ideas-filtered-' + new Date().toISOString().slice(0, 10) + '.csv';
        a.click();
        URL.revokeObjectURL(a.href);
        showCopyToast('Exported ' + sorted.length + ' ideas (CSV)');
      }

      function clearFilters() {
        activeCategory = '';
        activeStatus = '';
        searchQuery = '';
        showFavoritesOnly = false;
        qualityFilter = '';
        var searchEl = document.getElementById('search-input');
        if (searchEl) searchEl.value = '';
        var sortEl = document.getElementById('sort-select');
        if (sortEl) sortEl.value = 'default';
        sortBy = 'default';
        applyFilters();
      }

      function init() {
        applyTheme();
        var catContainer = document.getElementById('category-filters');
        var statusContainer = document.getElementById('status-filters');
        if (!catContainer || !statusContainer) return;
        var params = getParams();
        activeCategory = params.category;
        activeStatus = params.status;
        searchQuery = params.q;
        sortBy = params.sort;
        viewMode = (params.view && ['grid', 'list', 'gallery', 'kanban'].indexOf(params.view) >= 0) ? params.view : getViewPreference();
        setViewPreference(viewMode);
        var searchEl = document.getElementById('search-input');
        if (searchEl) searchEl.value = searchQuery;
        var sortEl = document.getElementById('sort-select');
        if (sortEl) { sortEl.value = sortBy; sortEl.addEventListener('change', function () { sortBy = this.value; applyFilters(); }); }
        document.querySelectorAll('.view-btn').forEach(function (btn) {
          var v = btn.getAttribute('data-view');
          btn.setAttribute('aria-pressed', v === viewMode ? 'true' : 'false');
          btn.classList.toggle('active', v === viewMode);
          btn.addEventListener('click', function () {
            viewMode = v;
            setViewPreference(viewMode);
            pushUrl();
            document.querySelectorAll('.view-btn').forEach(function (b) {
              b.setAttribute('aria-pressed', b.getAttribute('data-view') === viewMode ? 'true' : 'false');
              b.classList.toggle('active', b.getAttribute('data-view') === viewMode);
            });
            applyFilters();
          });
        });
        document.getElementById('share-btn').addEventListener('click', function () {
          var url = new URL(window.location.href);
          url.searchParams.set('category', activeCategory);
          url.searchParams.set('status', activeStatus);
          url.searchParams.set('q', searchQuery);
          url.searchParams.set('sort', sortBy);
          if (viewMode && viewMode !== 'grid') url.searchParams.set('view', viewMode);
          ['category', 'status', 'q', 'sort', 'view'].forEach(function (k) { if (!url.searchParams.get(k)) url.searchParams.delete(k); });
          var full = url.pathname + (url.search || '') + (url.hash || '');
          navigator.clipboard.writeText(url.origin + full).then(function () {
            showCopyToast('Link copied');
          }).catch(function () { showCopyToast('Copy failed'); });
        });
        document.getElementById('export-btn').addEventListener('click', function () {
          var dd = document.getElementById('export-dropdown');
          dd.classList.toggle('open');
          dd.querySelector('.export-btn').setAttribute('aria-expanded', dd.classList.contains('open'));
        });
        document.getElementById('export-json').addEventListener('click', function () {
          exportFilteredJson();
          document.getElementById('export-dropdown').classList.remove('open');
        });
        document.getElementById('export-csv').addEventListener('click', function () {
          exportFilteredCsv();
          document.getElementById('export-dropdown').classList.remove('open');
        });
        document.addEventListener('click', function (e) {
          if (!document.getElementById('export-dropdown').contains(e.target)) document.getElementById('export-dropdown').classList.remove('open');
        });
        document.getElementById('surprise-btn').addEventListener('click', function () {
          var cards = document.querySelectorAll('#ideas-grid .idea-card');
          if (!cards.length) return;
          var card = cards[Math.floor(Math.random() * cards.length)];
          card.scrollIntoView({ behavior: 'smooth', block: 'center' });
          var t = card.querySelector('.features-toggle');
          if (t) { t.click(); }
          showCopyToast('Surprise!');
        });
        document.getElementById('expand-all-btn').addEventListener('click', function () {
          document.querySelectorAll('#ideas-grid .features-list').forEach(function (el) { el.classList.add('visible'); });
          document.querySelectorAll('#ideas-grid .features-toggle').forEach(function (el) { el.setAttribute('aria-expanded', 'true'); });
        });
        document.getElementById('collapse-all-btn').addEventListener('click', function () {
          document.querySelectorAll('#ideas-grid .features-list').forEach(function (el) { el.classList.remove('visible'); });
          document.querySelectorAll('#ideas-grid .features-toggle').forEach(function (el) { el.setAttribute('aria-expanded', 'false'); });
        });
        document.getElementById('favorites-pill').addEventListener('click', function () {
          showFavoritesOnly = !showFavoritesOnly;
          applyFilters();
        });
        document.getElementById('theme-btn').addEventListener('click', function () {
          var pref = getThemePreference();
          var next;
          if (pref === 'light') next = 'dark';
          else if (pref === 'dark') next = 'auto';
          else {
            var systemDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
            next = systemDark ? 'light' : 'dark';
          }
          setThemePreference(next);
          applyTheme();
          showCopyToast(next === 'auto' ? 'Theme: system' : 'Theme: ' + next);
        });
        document.getElementById('clear-filters').addEventListener('click', clearFilters);
        document.querySelectorAll('.no-results .inline[data-quick]').forEach(function (btn) {
          btn.addEventListener('click', function () {
            var q = this.getAttribute('data-quick');
            if (q === 'production') { activeStatus = 'production'; searchQuery = ''; }
            else if (q === 'in-progress') { activeStatus = 'in-progress'; searchQuery = ''; }
            var searchEl = document.getElementById('search-input');
            if (searchEl) searchEl.value = '';
            applyFilters();
          });
        });
        var helpEl = document.getElementById('shortcut-help');
        if (helpEl) {
          helpEl.innerHTML = '<div class="inner"><h3>Keyboard shortcuts</h3><p><kbd>/</kbd> Focus search</p><p><kbd>?</kbd> Show this help</p><p><kbd>Esc</kbd> Close</p><button type="button" class="close" id="shortcut-help-close">Close</button></div>';
          document.addEventListener('keydown', function (e) {
            if (e.key === '?' && !/^(INPUT|TEXTAREA|SELECT)$/.test((document.activeElement && document.activeElement.tagName) || '')) {
              e.preventDefault();
              helpEl.classList.add('visible'); helpEl.setAttribute('aria-hidden', 'false');
            }
            if (e.key === 'Escape') { helpEl.classList.remove('visible'); helpEl.setAttribute('aria-hidden', 'true'); }
          });
          helpEl.querySelector('#shortcut-help-close').addEventListener('click', function () { helpEl.classList.remove('visible'); helpEl.setAttribute('aria-hidden', 'true'); });
          helpEl.addEventListener('click', function (e) { if (e.target === helpEl) helpEl.classList.remove('visible'); });
        }
        document.addEventListener('keydown', function (e) {
          if (e.key === 'Escape') {
            document.getElementById('export-dropdown').classList.remove('open');
            document.getElementById('export-dropdown').querySelector('.export-btn')?.setAttribute('aria-expanded', 'false');
            if (helpEl && helpEl.classList.contains('visible')) { helpEl.classList.remove('visible'); helpEl.setAttribute('aria-hidden', 'true'); }
          }
          if (e.key === '/' && !/^(INPUT|TEXTAREA|SELECT)$/.test((document.activeElement && document.activeElement.tagName) || '')) {
            e.preventDefault();
            if (searchEl) { searchEl.focus(); }
          }
        });
        if (window.matchMedia) window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', function () { if (getThemePreference() === 'auto') applyTheme(); });
        window.addEventListener('popstate', function () {
          var p = getParams();
          activeCategory = p.category;
          activeStatus = p.status;
          searchQuery = p.q;
          sortBy = p.sort;
          if (p.view && ['grid', 'list', 'gallery', 'kanban'].indexOf(p.view) >= 0) {
            viewMode = p.view;
            setViewPreference(viewMode);
            document.querySelectorAll('.view-btn').forEach(function (b) {
              b.setAttribute('aria-pressed', b.getAttribute('data-view') === viewMode ? 'true' : 'false');
              b.classList.toggle('active', b.getAttribute('data-view') === viewMode);
            });
          }
          if (searchEl) searchEl.value = searchQuery;
          if (sortEl) sortEl.value = sortBy;
          applyFilters();
        });
        Promise.all([
          fetch('categories.json').then(function (r) { return r.json(); }),
          fetch('ideas.json').then(function (r) { return r.json(); })
        ]).then(function (res) {
          categories = res[0];
          ideas = Array.isArray(res[1]) ? res[1] : [];
          renderCategoryFilters();
          renderStatusFilters();
          if (searchEl) searchEl.addEventListener('input', function () {
            var v = this.value.trim();
            if (searchDebounceTimer) clearTimeout(searchDebounceTimer);
            searchDebounceTimer = setTimeout(function () { searchQuery = v; applyFilters(); }, 220);
          });
          applyFilters();
          injectJsonLd();
        }).catch(function () {
          document.getElementById('board-stats').textContent = 'Could not load ideas. Check that ideas.json and categories.json exist.';
        });
      }

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
      } else {
        init();
      }
    })();
  </script>
</body>
</html>
